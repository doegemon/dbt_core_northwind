version: 3

models:
  - name: customers
    description: "This View has value information about the customers of Northwind, like their names, first order date, last order date, amount of orders placed, etc."
    columns:
      - name: country_code
        description: "the country code of the customer."
      - name: customer_id
        description: "unique key for the customer. Each customer has an unique customer_id."
        data_tests:
          - not_null
          - unique
          - relationships:
              to: ref('int_customers')
              field: customer_id
      - name: company_name
        description: "the name of the customer."
        data_tests:
          - not_null
      - name: first_order_date
        description: "the date that the customer placed its first order (null if it hasn't placed a order yet)."
      - name: last_order_date
        description: "the date that the customer placed its last order/the most recent one (null if it hasn't placed a order yet)."
      - name: total_orders
        description: "the amount of orders placed by the customer."
      - name: lifetime_value
        description: "the total revenue generated by the orders placed by the customer."
      - name: load_at
        description: "the timestamp of the View update."
  - name: customers_cluster
    description: "This View separates the customers in clusters based in their lifetime value (amount of revenue generated by the orders placed)."
    columns:
      - name: country_code
        description: "the country code of the customer."
      - name: customer_id
        description: "unique key for the customer. Each customer has an unique customer_id."
        data_tests:
          - not_null
          - unique
          - relationships:
              to: ref('int_customers')
              field: customer_id
      - name: company_name
        description: "the name of the customer."
        data_tests:
          - not_null
      - name: lifetime_value
        description: "the total revenue generated by the orders placed by the customer."
      - name: group_cluster
        description: "the cluster that the customer belongs based on their lifetime value."
