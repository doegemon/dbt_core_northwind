version: 3

models:
  - name: orders
    description: "This View has value information about orders, like the date of the order, the customer ID that placed the order, the number of products in the order, etc."
    columns:
      - name: country_code
        description: "the country code of the customer that placed the order."
      - name: country
        description: "the country of the customer that placed the order."
      - name: order_id
        description: "unique key for an order. Each order has an unique order_id."
        data_tests:
          - unique
          - not_null
          - relationships:
              to: ref('int_orders')
              field: order_id
      - name: customer_id
        description: "unique key for the customer that placed the order. Each customer has an unique customer_id."
        data_tests:
          - not_null
          - relationships:
              to: ref('int_customers')
              field: customer_id
      - name: order_date
        description: "the date that the order was placed."
        data_tests:
          - not_null
      - name: required_date
        description: "the delivery date required by the customer."
        data_tests:
          - not_null
      - name: shipped_date
        description: "the date the order was shipped (can be null if the order hasn't been shipped yet)."
      - name: total_order_revenue
        description: "the total revenue generated by the products purchased in the order."
      - name: total_order_revenue_w_discount
        description: "the total revenue generated by the products purchased in the order considering the discounts."
      - name: freight
        description: "the freight value."
      - name: total_products
        description: "the number of distinct products in the order."
      - name: total_products_quantity
        description: "the total quantity of products in the order."
      - name: employee_id
        description: "unique key for the employee responsible for the order. Each employee has an unique employee_id."
        data_tests:
          - not_null
          - relationships:
              to: ref('int_employees')
              field: employee_id
      - name: load_at
        description: "the timestamp of the View update."
  - name: orders_per_country_monthly
    description: "This View has information about orders and revenue based on the customers country per month."
    columns:
      - name: country_code
        description: "the country code of the customers."
      - name: country
        description: "the country of the customers."
      - name: year_month
        description: "the month and year of reference."
      - name: total_orders
        description: "the number of orders placed in the period of reference."
      - name: total_revenue
        description: "the total revenue generated in the period of reference."
      - name: avg_order_revenue
        description: "the average revenue generated per order in the period of reference."
      - name: total_revenue_w_discount
        description: "the total revenue generated (considering discounts) in the period of reference."
      - name: avg_order_revenue_discount
        description: "the average revenue generated (considering discounts) per order in the period of reference."
  - name: order_revenue_ytd
    description: "This View has information about orders and revenue based on the month and year, as well the revenue generated Year to Date (YTD)."
    columns:
      - name: year_month
        description: "the month and year of reference."
      - name: total_revenue
        description: "the total revenue generated in the period of reference."
      - name: rev_abs_diff
        description: "the absolute revenue difference between the period of reference and the last month."
      - name: rev_pct_diff
        description: "the relative/percentage revenue difference between the period of reference and the last month."
      - name: revenue_ytd
        description: "the total revenue generated in the year of the period of reference."
      - name: total_orders
        description: "the number of orders placed in the period of reference."
      - name: ord_abs_diff
        description: "the absolute number of orders difference between the period of reference and the last month."
      - name: ord_pct_diff
        description: "the relative/percentage number of orders difference between the period of reference and the last month."
      - name: orders_ytd
        description: "the number of orders placed in the year of the period of reference."
